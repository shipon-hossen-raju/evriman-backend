generator client {
  provider = "prisma-client-js"
}

// Database connection
datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

// ====================== ENUMS ======================
enum LoginType {
  USER
  PARTNER
}

enum VerificationStatus {
  PENDING
  APPROVED
  REJECTED
}

enum UserRole {
  ADMIN
  PARTNER
  USER
  SUPER_ADMIN
}

enum UserStatus {
  ACTIVE
  INACTIVE
  BLOCKED
}

// ====================== MODELS ======================

model User {
  id              String     @id @default(auto()) @map("_id") @db.ObjectId
  fullName        String
  email           String     @unique
  otp             Int?
  expirationOtp   DateTime?
  password        String
  address         String
  role            UserRole   @default(USER)
  status          UserStatus @default(ACTIVE)
  createdAt       DateTime   @default(now())
  updatedAt       DateTime   @updatedAt
  loginType       LoginType  @default(USER)
  phoneNumber     String
  dob             DateTime
  idDocument      String? // URL to uploaded ID document
  referralCode    String?
  termsAccepted   Boolean    @default(false)
  privacyAccepted Boolean    @default(false)
  isVerified      Boolean    @default(false)
  isDeceased      Boolean    @default(false)

  @@map("users")
}

// model for subscription
model SubscriptionPlan {
  id             String   @id @default(auto()) @map("_id") @db.ObjectId
  name           String
  contactLimit   Int
  isActive       Boolean  @default(true)
  pricingOptions Json
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  @@map("subscriptions")
}
